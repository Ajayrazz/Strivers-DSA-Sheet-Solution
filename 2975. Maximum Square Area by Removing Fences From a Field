class Solution {
    private static final int MOD = 1_000_000_007;
    public int maximizeSquareArea(int m, int n, int[] hFences, int[] vFences) {
        Set<Integer> horizontalSizes = new HashSet<>();
        Set<Integer> verticalSizes = new HashSet<>();
        List<Integer> hList = new ArrayList<>();
        for (int x : hFences) hList.add(x);
        hList.add(1);
        hList.add(m);
        Collections.sort(hList);

        for (int i = 0; i < hList.size(); i++) {
            for (int j = i + 1; j < hList.size(); j++) {
                horizontalSizes.add(hList.get(j) - hList.get(i));
            }
        }

        List<Integer> vList = new ArrayList<>();
        for (int x : vFences) vList.add(x);
        vList.add(1);
        vList.add(n);
        Collections.sort(vList);

        for (int i = 0; i < vList.size(); i++) {
            for (int j = i + 1; j < vList.size(); j++) {
                verticalSizes.add(vList.get(j) - vList.get(i));
            }
        }

        int maxSide = 0;
        for (int len : horizontalSizes) {
            if (verticalSizes.contains(len)) {
                maxSide = Math.max(maxSide, len);
            }
        }

        return maxSide == 0 ? -1 : (int) ((1L * maxSide * maxSide) % MOD);
    }
}
